<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="Java,随笔,个人总结,vue,后端开发,效率办公,前端,web,Android"><meta name="description" content="你以为你以为就是你以为"><meta name="author" content="dubulingbo"><title>云服务器开发笔记 | Habitplus&#39;s 笔记</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/logo.svg"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/fontawesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/regular.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/solid.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/font/css/brands.min.css"><script id="hexo-configurations">let KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"dublbo.netlify.app","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#2db55d","logo":"/images/logo.svg","favicon":"/images/logo.svg","avatar":"/images/avatar.svg","font_size":null,"font_family":null,"hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"header_transparent":true,"background_img":"/images/bg.svg","description":"世上本无难事，为之则易！","font_color":null,"hitokoto":false},"scroll":{"progress_bar":false,"percent":true}},"local_search":{"enable":true,"preload":true},"code_copy":{},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":true},"lazyload":{"enable":true},"comment":{"enable":true,"use":"valine","valine":{"appid":"xfhzCEcIw4xlmNUsMcg8Ce3r-gzGzoHsz","appkey":"j3DqDhnVONn6xb5xiVKmHRM1","server_urls":null,"placeholder":"填写完个人信息才能发言哦 o(*^▽^*)┛","lang":"zh-CN","avatar":"monsterid","guest_info":"nick,mail,link"},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.8"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":true,"auto":true,"custom_label_list":["Trainee","Engineer","Architect"]},"word_count":{"enable":true,"wordcount":true,"min2read":true},"img_align":"left","copyright_info":true},"version":"3.6.1"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}</script><meta name="generator" content="Hexo 6.3.0"></head><body>[object Promise]<main class="page-container"><div class="page-main-content"><div class="page-main-content-top">[object Promise]</div><div class="page-main-content-middle"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">云服务器开发笔记</span></div><div class="article-header"><div class="avatar"><img src="/images/avatar.svg"></div><div class="info"><div class="author"><span class="name">dubulingbo</span> <span class="author-label">Lv4</span></div><div class="meta-info">[object Promise]</div></div></div><div class="article-content keep-markdown-body"><blockquote><p>本文档是记录使用阿里云服务器搭建自己的网站和应用的使用记录</p><p>系统：Centos7.6</p><p>内核：3.10.0-1160.49.1.el7.x86_64</p></blockquote><h1 id="1-配置PS1及命令别名"><a href="#1-配置PS1及命令别名" class="headerlink" title="1. 配置PS1及命令别名"></a>1. 配置PS1及命令别名</h1><p>在自己的家目录下的<code>.bashrc</code>文件里添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定制自己的快捷命令</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">rm</span>=<span class="string">&#x27;rm -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">cp</span>=<span class="string">&#x27;cp -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">mv</span>=<span class="string">&#x27;mv -i&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> cls=<span class="string">&#x27;clear&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置提示符</span></span><br><span class="line">PS1=<span class="string">&quot;[\[\e[36;40m\]\u@\[\e[31;40m\]\h \[\e[33;40m\]\w\[\e[0m\]]\$ &quot;</span></span><br></pre></td></tr></table></figure><p>运行一下该文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h1 id="2-安装jdk8"><a href="#2-安装jdk8" class="headerlink" title="2. 安装jdk8"></a>2. 安装jdk8</h1><h2 id="2-1-官网下载jdk8"><a href="#2-1-官网下载jdk8" class="headerlink" title="2.1 官网下载jdk8"></a>2.1 官网下载jdk8</h2><ul><li>清华大学镜像：<a class="link" target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/Adoptium/8/jdk/x64/linux/">OpenJDK<i class="fas fa-external-link-alt"></i></a></li><li>Oracle官网，需登录：<a class="link" target="_blank" rel="noopener" href="https://www.oracle.com/cn/java/technologies/javase/javase8u211-later-archive-downloads.html">OracleJDK<i class="fas fa-external-link-alt"></i></a></li></ul><h2 id="2-2-解压"><a href="#2-2-解压" class="headerlink" title="2.2 解压"></a>2.2 解压</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf [压缩包] -C [解压目录]</span><br></pre></td></tr></table></figure><h2 id="2-3-配置环境变量"><a href="#2-3-配置环境变量" class="headerlink" title="2.3 配置环境变量"></a>2.3 配置环境变量</h2><p>vim &#x2F;etc&#x2F;profile，在最后添加以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=[解压后的jdk根目录]</span><br><span class="line">PATH=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME PATH</span><br></pre></td></tr></table></figure><p>运行profile文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure><h1 id="3-安装docker容器"><a href="#3-安装docker容器" class="headerlink" title="3. 安装docker容器"></a>3. 安装docker容器</h1><blockquote><p>参考链接：<code>https://www.cnblogs.com/yufeng218/p/8370670.html</code></p></blockquote><p><strong>安装docker需要使用<code>root</code>权限</strong></p><ul><li><p>先更新yum包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></table></figure></li><li><p>卸载旧版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure></li><li><p>安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure></li><li><p>设置yum源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li><li><p>可以先查看所有仓库中所有docker版本，并选择特定版本安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list docker-ce --showduplicates | <span class="built_in">sort</span> -r</span><br></pre></td></tr></table></figure></li><li><p>安装docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#由于repo中默认只开启stable仓库，故这里安装的是最新稳定版</span></span><br><span class="line">sudo yum install docker-ce</span><br></pre></td></tr></table></figure></li><li><p>启动并加入开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure></li><li><p>查看docker的版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure></li><li><p>至此，docker安装成功！<br><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1639722769217.6p7gicix9fw0.png" alt="1639722769217"></p></li></ul><h1 id="4-使用docker安装mysql"><a href="#4-使用docker安装mysql" class="headerlink" title="4. 使用docker安装mysql"></a>4. 使用docker安装mysql</h1><blockquote><p>docker命令参考：<a class="link" target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-command-manual.html">https://www.runoob.com/docker/docker-command-manual.html<i class="fas fa-external-link-alt"></i></a></p></blockquote><ul><li><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql <span class="comment">#搜索mysql库中的版本</span></span><br><span class="line">docker pull mysql   <span class="comment">#安装最新版稳定版的mysql</span></span><br><span class="line">docker iamges       <span class="comment">#查看docker已安装的镜像（软件）</span></span><br></pre></td></tr></table></figure></li><li><p>启动mysql，并映射到本地的3306端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过镜像运行软件</span></span><br><span class="line">docker run mysql[:版本号，默认为最新版] -itd --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=[你的密码]</span><br><span class="line"><span class="comment"># 查看docker中正在运行的软件</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure></li><li><p>进入mysql，并配置远程登录用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以交互模式进入mysql</span></span><br><span class="line">docker <span class="built_in">exec</span> -it mysql bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下命令都是在docker控制台运行的</span></span><br><span class="line">mysql -u root -p <span class="comment"># 回车后，输入你刚刚设置的额mysql root 用户的密码即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建mysql user，并设置成远程可登录及远程登录密码</span></span><br><span class="line">create user <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;用户密码&#x27;</span>;</span><br><span class="line"><span class="comment"># 赋予权限</span></span><br><span class="line">grant all on *.* to <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;用户密码&#x27;</span>;</span><br><span class="line"><span class="comment">#刷新权限池</span></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li><li><p>至此，就可以通过【本机的ip + 3306端口 + 远程登录用户和密码】就能远程连接MySQL了！<br><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1639723789905.6hjgpcaieys0.png" alt="1639723789905"></p></li></ul><h1 id="5-运行jar"><a href="#5-运行jar" class="headerlink" title="5. 运行jar"></a>5. 运行jar</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> java -jar [你的jar包] &gt; [输出文件（日志）] 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><ul><li><p>2&gt;&amp;1解释：<br><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1639724589863.27fpfrkdx4g0.png" alt="1639724589863"></p></li><li><p>查看输出文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f [输出文件]</span><br></pre></td></tr></table></figure></li><li><p>验证服务是否启动成功：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep java</span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1639725051097.2s84qfidvl40.png"></p></li></ul><h1 id="6-安装nginx"><a href="#6-安装nginx" class="headerlink" title="6. 安装nginx"></a>6. 安装nginx</h1><p>nginx服务器是一个轻量级的、操作方便，可实现正向和反向代理，基本每个开发者都不会陌生的一个web服务器。本文以压缩包安装为例！</p><blockquote><p>官网：<a class="link" target="_blank" rel="noopener" href="https://nginx.org/en/">https://nginx.org/en/<i class="fas fa-external-link-alt"></i></a></p><p>中文文档：<a class="link" target="_blank" rel="noopener" href="https://www.nginx.cn/doc/">https://www.nginx.cn/doc/<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="6-1-安装"><a href="#6-1-安装" class="headerlink" title="6.1 安装"></a>6.1 安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><h2 id="6-2-配置"><a href="#6-2-配置" class="headerlink" title="6.2 配置"></a>6.2 配置</h2><p>配置代理，找到配置文件<code>/etc/nginx/nginx.conf</code>，找到<code>server</code>模块：<br><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1640678397202.32k4mjwr6me0.png" alt="1640678397202"></p><h2 id="6-3-相关命令"><a href="#6-3-相关命令" class="headerlink" title="6.3 相关命令"></a>6.3 相关命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启/启动/停止/查看状态</span></span><br><span class="line">systemctl restart/start/stop/status nginx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新加载配置文件</span></span><br><span class="line">nginx -s reload </span><br><span class="line"></span><br><span class="line">nginx -s reopen #重启Nginx</span><br><span class="line"></span><br><span class="line">nginx -s reload #重新加载Nginx配置文件，然后以优雅的方式重启Nginx</span><br><span class="line"></span><br><span class="line">nginx -s stop #强制停止Nginx服务</span><br><span class="line"></span><br><span class="line">nginx -s quit #优雅地停止Nginx服务（即处理完所有请求后再停止服务）</span><br><span class="line"></span><br><span class="line">nginx -t #检测配置文件是否有语法错误，然后退出</span><br><span class="line"></span><br><span class="line">nginx -?,-h #打开帮助信息</span><br><span class="line"></span><br><span class="line">nginx -v #显示版本信息并退出</span><br><span class="line"></span><br><span class="line">nginx -V #显示版本和配置选项信息，然后退出</span><br><span class="line"></span><br><span class="line">nginx -t #检测配置文件是否有语法错误，然后退出</span><br><span class="line"></span><br><span class="line">nginx -T #检测配置文件是否有语法错误，转储并退出</span><br><span class="line"></span><br><span class="line">nginx -q #在检测配置文件期间屏蔽非错误信息</span><br><span class="line"></span><br><span class="line">nginx -p prefix #设置前缀路径(默认是:/usr/share/nginx/)</span><br><span class="line"></span><br><span class="line">nginx -c filename #设置配置文件(默认是:/etc/nginx/nginx.conf)</span><br><span class="line"></span><br><span class="line">nginx -g directives #设置配置文件外的全局指令</span><br><span class="line"></span><br><span class="line">killall nginx #杀死所有nginx进程</span><br></pre></td></tr></table></figure><h2 id="6-4-可能遇到的问题"><a href="#6-4-可能遇到的问题" class="headerlink" title="6.4 可能遇到的问题"></a>6.4 可能遇到的问题</h2><ul><li>能访问 index页面，根据路由也进入下一个页面，但是在路由到的页面上刷新会出现404，需要在nginx配置文件中加入，通过路由进行导航：<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">	<span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>       [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  _;</span><br><span class="line">    <span class="attribute">root</span>         /usr/share/nginx/html/guan-web;</span><br><span class="line">    **<span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;** --- 防止刷新页面出现404</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/default.d/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /auth-local &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>      http://127.0.0.1:8000/;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> /favorite-api &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>      http://127.0.0.1:9000/;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">404</span> /<span class="number">404</span>.html;</span><br><span class="line">        <span class="section">location</span> = /<span class="number">404</span>.html &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /50x.html;</span><br><span class="line">        <span class="section">location</span> = /50x.html &#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="7-使用docker安装redis"><a href="#7-使用docker安装redis" class="headerlink" title="7. 使用docker安装redis"></a>7. 使用docker安装redis</h1><blockquote><p>参考链接：<a class="link" target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1670205">https://cloud.tencent.com/developer/article/1670205<i class="fas fa-external-link-alt"></i></a></p><p>redis 官网：<a class="link" target="_blank" rel="noopener" href="http://www.redis.cn/">http://www.redis.cn/<i class="fas fa-external-link-alt"></i></a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取镜像</span></span><br><span class="line">docker pull redis</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动</span></span><br><span class="line">docker run -p 6379:6379 --name redis -v /usr/local/soft/redis/redis.conf:/etc/redis/redis.conf  -v /usr/local/soft/redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看启动日志</span></span><br><span class="line">docker logs redis</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">交互运行</span></span><br><span class="line">docker exec -it redis redis-cli</span><br></pre></td></tr></table></figure><p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1642400521245.369jp7z4jum0.png" alt="1642400521245"></p><ul><li>redis.conf配置文件：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bind 127.0.0.1 			#注释掉这部分，使redis可以外部访问</span><br><span class="line">daemonize no   			#用守护线程的方式启动</span><br><span class="line">requirepass 你的密码	 #给redis设置密码</span><br><span class="line">appendonly yes 		    #redis持久化　　默认是no</span><br><span class="line">tcp-keepalive 300       #防止出现远程主机强迫关闭了一个现有的连接的错误 默认是300</span><br></pre></td></tr></table></figure></li></ul><h1 id="8-配置jar包启动-关闭-重启的shell脚本"><a href="#8-配置jar包启动-关闭-重启的shell脚本" class="headerlink" title="8. 配置jar包启动|关闭|重启的shell脚本"></a>8. 配置jar包启动|关闭|重启的shell脚本</h1><p>启动脚本在开发和测试阶段还是很方便的，可大大提升开发效率，因为这样可以不用每次提交代码后去手动敲复杂的启动命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">替换为你自己的执行jar包，其他代码无需更改</span></span><br><span class="line">APP_NAME=guan-auth-1.0.jar</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">第三方jar包所在路径</span></span><br><span class="line">CLASS_LIB_PATH=/root/workspace/myjars/lib/</span><br><span class="line">JAR_PATH=/root/workspace/myjars/auth</span><br><span class="line">OUT_FILE=/root/workspace/logs/auth/guan-auth.out</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用说明，用来提示输入参数</span></span><br><span class="line">usage() &#123;</span><br><span class="line">    echo &quot;Usage: sh 脚本名.sh [start|stop|restart|status]&quot;</span><br><span class="line">    exit 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查程序是否在运行</span></span><br><span class="line">is_exist()&#123;</span><br><span class="line">  pid=`ps -ef|grep $APP_NAME|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27; `</span><br><span class="line"><span class="meta prompt_">  #</span><span class="language-bash">如果不存在返回1，存在返回0</span></span><br><span class="line">  if [ -z &quot;$&#123;pid&#125;&quot; ]; then</span><br><span class="line">   return 1</span><br><span class="line">  else</span><br><span class="line">    return 0</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动方法</span></span><br><span class="line">start() &#123;</span><br><span class="line">  is_exist</span><br><span class="line">  if [ $? -eq &quot;0&quot; ]; then</span><br><span class="line">    echo &quot;$&#123;APP_NAME&#125; is already running. pid=$&#123;pid&#125; .&quot;</span><br><span class="line">  else</span><br><span class="line"><span class="meta prompt_">  	# </span><span class="language-bash">因为在打包时，把所有的第三方jar全部抽取出来了（减少打包的体积），所以启动的时候需要加上 -Dloader.path 参数</span></span><br><span class="line">    nohup java -Dloader.path=$CLASS_LIB_PATH -jar $JAR_PATH/$APP_NAME &gt; $OUT_FILE 2&gt;&amp;1 &amp;</span><br><span class="line">    echo &quot;$&#123;APP_NAME&#125; start success&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">停止方法</span></span><br><span class="line">stop() &#123;</span><br><span class="line">  is_exist</span><br><span class="line">  if [ $? -eq &quot;0&quot; ]; then</span><br><span class="line">    kill -9 $pid</span><br><span class="line">  else</span><br><span class="line">    echo &quot;$&#123;APP_NAME&#125; is not running&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输出运行状态</span></span><br><span class="line">status() &#123;</span><br><span class="line">  is_exist</span><br><span class="line">  if [ $? -eq &quot;0&quot; ]; then</span><br><span class="line">    echo &quot;$&#123;APP_NAME&#125; is running. Pid is $&#123;pid&#125;&quot;</span><br><span class="line">  else</span><br><span class="line">    echo &quot;$&#123;APP_NAME&#125; is NOT running.&quot;</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启</span></span><br><span class="line">restart() &#123;</span><br><span class="line">  stop</span><br><span class="line">  start</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">根据输入参数，选择执行对应方法，不输入则执行使用说明</span></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">  &quot;start&quot;)</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line">  &quot;stop&quot;)</span><br><span class="line">    stop</span><br><span class="line">    ;;</span><br><span class="line">  &quot;status&quot;)</span><br><span class="line">    status</span><br><span class="line">    ;;</span><br><span class="line">  &quot;restart&quot;)</span><br><span class="line">    restart</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    usage</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参考： https://www.cnblogs.com/chywx/p/10460061.html</span></span><br></pre></td></tr></table></figure><ul><li><p>使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh [你的脚本] [restart|stop|start|status]</span><br></pre></td></tr></table></figure></li><li><p>在idea中配置插件<code>Alibaba Cloud Tookit</code>自动部署运行如下图：<br><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/dubulingbo/image-bed@main/post-pic-db01/1651286494771.3se0dmxwfza.png" alt="1651286494771"></p></li></ul></div><div class="post-copyright-info">[object Promise]</div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/Java/">#Java</a>&nbsp;</li><li class="tag-item"><a href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">#环境搭建</a>&nbsp;</li><li class="tag-item"><a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/">#云服务器</a>&nbsp;</li></ul><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/suibi/jixing/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">~看心情写写欸~</span> <span class="post-nav-item">上一篇</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/efficiency-work/code-highlight/"><span class="title flex-center"><span class="post-nav-title-item">Code Highlight Style test</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div><div class="comment-container">[object Promise]</div></div><div class="toc-content-container">[object Promise]</div></div></div></div></div><div class="page-main-content-bottom">[object Promise]</div></div><div class="post-tools">[object Promise]</div><div class="right-bottom-side-tools">[object Promise]</div>[object Promise] [object Promise]</main><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/dark-light-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/local-search.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/code-block.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/lazyload.js"></script><div class="post-scripts pjax"><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/post-helper.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/toc.js"></script></div><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.6.1/source/js/libs/pjax.min.js"></script><script>window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });</script></body></html>